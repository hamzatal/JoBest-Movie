# render.yaml - الكود النهائي لخدمة الويب فقط
services:
  # 1. خدمة الويب (Laravel/Inertia)
  - type: web
    name: jobest
    plan: free
    region: oregon
    
    buildCommand: |
      composer install --no-dev --prefer-dist
      npm install
      npm run build
      
    startCommand: php artisan serve --host=0.0.0.0
    env: static
    rootDir: .
    
    # متغيرات البيئة (Environment Variables)
    envVars:
      - key: APP_KEY
        generateValue: true
      - key: APP_ENV
        value: production
      - key: APP_DEBUG
        value: false
      - key: DB_CONNECTION
        value: pgsql
      - key: TMDB_API_KEY
        value: YOUR_TMDB_API_KEY_HERE
      - key: WEB_CONCURRENCY
        value: 1
      
    # أمر التشغيل قبل النشر
    preDeployCommand: |
      php artisan migrate --force
