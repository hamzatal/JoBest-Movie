# render.yaml - الكود النهائي والمصحح لـ Render Free Tier
services:
  # 1. خدمة الويب (Laravel/Inertia)
  - type: web
    name: jobest
    plan: free
    
    # تم إزالة env: php بالكامل
    
    rootDir: .
    
    # دمج أوامر البناء
    buildCommand: |
      composer install --no-dev --prefer-dist
      npm install
      npm run build
      
    # دمج أمر الترحيل مع أمر البدء
    startCommand: |
      php artisan migrate --force
      php artisan serve --host=0.0.0.0
      
    # متغيرات البيئة (Environment Variables)
    envVars:
      - key: APP_KEY
        generateValue: true
      - key: APP_ENV
        value: production
      - key: APP_DEBUG
        value: false
      - key: DB_CONNECTION
        value: pgsql
      - key: TMDB_API_KEY
        value: YOUR_TMDB_API_KEY_HERE
      - key: WEB_CONCURRENCY
        value: 1
